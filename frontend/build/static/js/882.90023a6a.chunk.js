"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[882],{8771:function(t,s,n){n.r(s),n.d(s,{default:function(){return g}});var e=n(6982),o=n(5861),r=n(885),a=n(7757),i=n.n(a),d=n(2791),c=n(2869),p=n(6871),l=n(3504),u=n(6068),h=n(1122),f=n(5218),x=n(9556),m=n(7502),j=n(184);var v=function(t){return(0,j.jsxs)("div",{className:"board-oppost",id:t.post.id,children:[(0,j.jsxs)("div",{className:"board-oppost__header",children:[(0,j.jsx)(u.Z,{createdat:t.post.createdAt,id:t.post.id,username:t.post.userName}),(0,j.jsx)(l.rU,{to:"".concat(t.post.ThreadId),className:"board-oppost__post-id",children:"\u041e\u0442\u0432\u0435\u0442"},t.post.ThreadId),(0,j.jsxs)("div",{className:"board-oppost__btns",children:[(0,j.jsx)("div",{className:"board-oppost__btns-wr",children:(0,j.jsx)(x.Z,{params:{threadId:t.post.ThreadId,lastpost:t.lastpost,postTitle:t.post.postTitle}})}),(0,j.jsxs)("div",{className:"board-oppost__btns-wr",children:[(0,j.jsx)(m.Z,{idparams:{postId:t.post.id}}),(0,j.jsx)(f.Z,{idparams:{threadId:t.post.ThreadId,postId:t.post.id}})]})]})]}),(0,j.jsx)(h.Z,{post:t.post}),(0,j.jsx)("div",{className:"board-oppost__footer",children:(0,j.jsxs)("p",{className:"",children:["\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e ",t.totalCount-t.shown," \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, 0 \u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430\u043c\u0438."]})})]})},w=n(2679),b=n(6030),N=n(6482),T=function(t){var s=(0,b.I0)(),n=(0,b.v9)((function(t){return t.appState.hiddenPostsAndThreads}));return(0,j.jsx)("div",{className:"board-main-thread",children:n[t.posts[0].id]?(0,j.jsxs)("div",{className:"board-main-oppost",onClick:function(){return s((0,N.iB)(t.posts[0].id))},children:["\u0421\u043a\u0440\u044b\u0442\u044b\u0439 \u0442\u0440\u0435\u0434 \u2116",t.posts[0].id," (",t.posts[0].postTitle,")"]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(v,{totalCount:t.totalCount,shown:t.posts.slice(1).length+1,post:t.posts[0],lastpost:t.posts[t.posts.length-1].id},t.posts[0].id),t.posts.slice(1).map((function(t){return n[t.id]?(0,j.jsxs)("div",{onClick:function(){return s((0,N.iB)(t.id))},children:["\u0421\u043a\u0440\u044b\u0442\u044b\u0439 \u043f\u043e\u0441\u0442 \u2116",t.id," (",t.postTitle,")"]}):(0,j.jsx)(w.Z,{posttype:"post",post:t},t.id)}))]})})},Z=n(6450),_=function(){var t=(0,d.useState)(!1),s=(0,r.Z)(t,2),n=s[0],e=s[1],a=(0,d.useState)([]),l=(0,r.Z)(a,2),u=l[0],h=l[1],f=(0,p.UO)(),x=(0,b.I0)(),m=0,v=!1,w=new c.Z;function N(){return _.apply(this,arguments)}function _(){return(_=(0,o.Z)(i().mark((function t(){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(v&&window.pageYOffset+window.screen.height>=document.body.scrollHeight)){t.next=6;break}return v=!1,t.next=4,w.getAllThreadsOnBoard(Object.values(f)[0],m++);case 4:(s=t.sent).length>0&&(h((function(t){return t.concat(s)})),v=!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,d.useEffect)((function(){function t(){return(t=(0,o.Z)(i().mark((function t(){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getAllThreadsOnBoard(Object.values(f)[0],m++);case 2:s=t.sent,h((function(){return s})),e((function(){return!0})),v=!0;case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return window.scroll(0,0),function(){t.apply(this,arguments)}(),window.addEventListener("scroll",N),function(){window.removeEventListener("scroll",N),x((0,Z.U9)())}}),[f]),(0,j.jsx)(j.Fragment,{children:n?u.map((function(t){return(0,j.jsx)(T,{totalCount:t.count,posts:t.rows},t.rows[0].ThreadId)})):(0,j.jsx)("div",{children:"Loading..."})})},g=function(){return(0,j.jsxs)("main",{className:"board-main",children:[(0,j.jsx)(_,{}),(0,j.jsx)(e.Z,{})]})}}}]);
//# sourceMappingURL=882.90023a6a.chunk.js.map