(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[115],{9556:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(6030),s=n(6482),a=n(184);var o=function(e){var t=(0,r.I0)(),n=(0,r.v9)((function(e){return e.appState.favoriteThreads}));return(0,a.jsx)("button",{className:"btn-favorite btn",onClick:function(){return t((0,s.XU)(e.params))},children:(0,a.jsxs)("svg",{className:void 0===n[e.params.threadId]?"favorite svg-btn":"favorite svg-btn favorite--active",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:"14px",height:"14px",version:"1.1",viewBox:"0 0 14 14",children:[(0,a.jsx)("rect",{className:"fil0",x:"-0.03",y:"0.03",width:"14",height:"14"}),(0,a.jsx)("polygon",{className:"fil1 str0",points:"6.97,3.09 6.02,6.1 2.91,6.1 5.43,7.96 4.46,10.97 6.97,9.1 9.49,10.97 8.52,7.96 11.04,6.1 7.93,6.1 "})]})})}},7502:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(6030),s=n(6482),a=n(184);var o=function(e){var t=(0,r.I0)();return(0,a.jsx)("button",{className:"btn-hide btn",onClick:function(){return t((0,s.jp)(e.idparams.postId))},children:(0,a.jsxs)("svg",{className:"hide svg-btn",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:"14px",height:"14px",version:"1.1",viewBox:"0 0 14 14",children:[(0,a.jsx)("rect",{className:"fil0",width:"14",height:"14"}),(0,a.jsx)("line",{className:"fil1 str0",x1:"2.5",y1:"2.5",x2:"11.5",y2:"11.5"}),(0,a.jsx)("line",{className:"fil1 str0",x1:"11.5",y1:"2.5",x2:"2.5",y2:"11.5"})]})})}},5218:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(2791),s=n(6030),a=n(5339),o=n(184);var c=function(e){var t=(0,s.I0)(),n=(0,r.useRef)(null);return(0,o.jsx)("button",{ref:n,className:"btn-triangle btn",onClick:function(){return t((0,a.wF)(function(){var t=n.current.getBoundingClientRect();return{top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,postId:e.idparams.postId,threadId:e.idparams.threadId}}()))},children:(0,o.jsxs)("svg",{className:"triangle svg-btn",xmlns:"http://www.w3.org/2000/svg",width:"14px",height:"14px",version:"1.1",viewBox:"0 0 14 14",children:[(0,o.jsx)("rect",{className:"fil0",width:"14",height:"14"}),(0,o.jsx)("polygon",{className:"fil1 str0",points:"10.902,7.158 7.051,4.828 3.2,2.498 3.2,7.158 3.2,11.818 7.051,9.488 "})]})})}},6982:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(6030),s=n(6068),a=n(1122),o=n(5218),c=n(3682),i=n(184);var u=function(e){var t=(0,r.I0)();return(0,i.jsxs)("div",{className:"reply-post",onMouseOver:function(e){t((0,c.A3)())},onMouseLeave:function(e){t((0,c.Pm)())},style:e.pos,children:[(0,i.jsxs)("div",{className:"post__header",children:[(0,i.jsx)(s.Z,{createdat:e.post.createdAt,id:e.post.id,username:e.post.userName}),(0,i.jsx)("div",{className:"post__btns",children:(0,i.jsx)("div",{className:"post__btns-wr",children:(0,i.jsx)(o.Z,{idparams:{threadId:e.post.ThreadId,postId:e.post.id}})})})]}),(0,i.jsx)(a.Z,{post:e.post})]})},l=function(){var e=(0,r.v9)((function(e){return e.replyPostsState.order})),t=(0,r.v9)((function(e){return e.replyPostsState.orderData})),n=(0,r.v9)((function(e){return e.replyPostsState.threads}));return(0,i.jsx)(i.Fragment,{children:t&&e.map((function(e){return(0,i.jsx)(u,{post:n[t[e].threadId][e],pos:t[e].pos},e)}))})}},1122:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(184);var s=function(e){return(0,r.jsx)("div",{className:"post-common__wr",children:(0,r.jsx)("p",{className:"post-common__text",dangerouslySetInnerHTML:{__html:e.text}})})};var a=function(e){return(0,r.jsx)("div",{className:"post-common-answers",children:e.answers&&e.answers.map((function(e){return(0,r.jsx)("a",{"data-path":e.boardName+"/"+e.ThreadId+"#"+e.id,className:"reply-link",children:">>"+e.id},e.id)}))})},o=n(885);var c=function(e){return(0,r.jsx)("div",{className:"search-modal",onMouseLeave:function(t){return e.ML(t)},children:(0,r.jsxs)("div",{className:"post-menu-modal",children:[(0,r.jsx)("a",{className:"post-menu-modal__btn",href:"https://www.google.com/searchbyimage?image_url="+e.url,target:"_blank",children:"\u0418\u0441\u043a\u0430\u0442\u044c \u0432 Google"}),(0,r.jsx)("a",{className:"post-menu-modal__btn",href:"https://yandex.com/images/search?rpt=imageview&amp;url="+e.url,target:"_blank",children:"\u0418\u0441\u043a\u0430\u0442\u044c \u0432 Yandex"}),(0,r.jsx)("a",{className:"post-menu-modal__btn",href:"https://saucenao.com/search.php?url="+e.url,target:"_blank",children:"\u0418\u0441\u043a\u0430\u0442\u044c \u0432 Saucenao"}),(0,r.jsx)("a",{className:"post-menu-modal__btn",href:"https://iqdb.org/?url="+e.url,target:"_blank",children:"\u0418\u0441\u043a\u0430\u0442\u044c \u0432 iqdb"})]})})},i=n(2791);var u=function(e){var t=(0,i.useState)(!1),n=(0,o.Z)(t,2),s=n[0],a=n[1];return(0,r.jsxs)("div",{className:"btn-search-wr btn",onClick:function(){return a(!s)},children:[(0,r.jsx)("button",{className:"btn-search",children:(0,r.jsxs)("svg",{className:"search svg-btn",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:"14px",height:"14px",version:"1.1",viewBox:"0 0 14 14",children:[(0,r.jsx)("rect",{className:"fil0",width:"14",height:"14"}),(0,r.jsx)("ellipse",{className:"fil1 str0",cx:"6",cy:"6.5",rx:"3.5",ry:"4"}),(0,r.jsx)("line",{className:"fil1 str1",x1:"8.5",y1:"9.5",x2:"11.5",y2:"12.5"})]})}),s&&(0,r.jsx)(c,{url:e.url,ML:function(){a(!1)}})]})},l=n(4802);var p=function(e){return(0,r.jsx)("button",{className:"btn-download btn",onClick:function(){(0,l.saveAs)(e.url+e.file,e.file)},children:(0,r.jsxs)("svg",{className:"download svg-btn",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:"14px",height:"14px",version:"1.1",viewBox:"0 0 14 14",children:[(0,r.jsx)("rect",{className:"fil0 str1",x:"3.97",y:"1.985",width:"6.029",height:"7.015"}),(0,r.jsx)("polygon",{className:"fil0 str0",points:"7,12.5 5.052,11 3.103,9.5 7,9.5 10.897,9.5 8.948,11 "})]})})},d=n(6030),f=n(9028);var m=function(e){var t=(0,d.I0)();function n(e){var n=e.split(".");return"mp4"===n[1]||"webm"===n[1]||"gif"===n[1]?(0,r.jsx)("img",{src:"http://localhost:7000/files/pv_"+n[0]+".jpg",onClick:function(){return t((0,f.R6)(e))},alt:"",className:"post-common-images__video"}):(0,r.jsx)("img",{src:"http://localhost:7000/files/pv_"+e,onClick:function(){return t((0,f.R6)(e))},alt:"",className:"post-common-images__img"})}return(0,r.jsx)("div",{className:"post-common-images",children:e.files&&e.files.map((function(e){return(0,r.jsxs)("figure",{className:"post-common-images__img-wr",children:[(0,r.jsxs)("div",{className:"post-common-images__title",children:[(0,r.jsx)("a",{href:"http://localhost:7000/files/"+e,target:"_blank",className:"post-common-images__name",children:e}),(0,r.jsxs)("div",{className:"post-common-images__title-btns",children:[(0,r.jsx)(u,{url:"http://localhost:7000/files/"+e}),(0,r.jsx)(p,{url:"http://localhost:7000/files/",file:e})]})]}),n(e)]},e)}))})},h=n(3682),v=n(6871);var g=function(e){var t=(0,d.I0)(),n=(0,v.s0)();return(0,r.jsxs)("div",{className:"post__body",onClick:function(e){return function(e){if("reply-link"===e.target.className){var t=window.location.pathname.split("/"),r=e.target.dataset.path;4===t.length?t[3]===r.split(/(?:#|\/)/g)[1]?(document.getElementById(r.split("#")[1]).scrollIntoView(),window.history.pushState(null,null,"#"+r.split("#")[1])):n("/board/"+r,{replace:!0}):n(r.split("/")[1])}}(e)},onMouseOut:function(e){return function(e){"reply-link"===e.target.className&&t((0,h.dX)(e))}(e)},onMouseOver:function(e){return function(e){"reply-link"===e.target.className&&t((0,h.Rq)(e))}(e)},children:[e.post.mediaFiles&&(0,r.jsx)(m,{files:e.post.mediaFiles}),(0,r.jsx)(s,{text:e.post.text}),(0,r.jsx)(a,{answers:e.post.answers})]})}},6068:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(184);var s=function(e){var t=e.createdat.split(".")[0].split("T");return(0,r.jsxs)("div",{className:"post-common-header",children:["sage"===e.username?(0,r.jsx)("p",{className:"post-common-header__user link-color",children:"\u0410\u043d\u043e\u043d\u0438\u043c"}):(0,r.jsx)("p",{className:"post-common-header__user",children:e.username}),(0,r.jsx)("span",{className:"post-common-header__time-date",children:t[0].replaceAll("-","/")}),(0,r.jsx)("span",{className:"post-common-header__time-clock",children:t[1]}),(0,r.jsxs)("p",{className:"post-common-header__post-id",children:["\u2116",e.id]})]})}},2679:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(6068),s=n(1122),a=n(5218),o=n(184);var c=function(e){return(0,o.jsxs)("div",{className:"post",id:e.post.id,children:[(0,o.jsxs)("div",{className:"post__header",children:[(0,o.jsx)(r.Z,{createdat:e.post.createdAt,id:e.post.id,username:e.post.userName}),(0,o.jsx)("div",{className:"post__btns",children:(0,o.jsx)("div",{className:"post__btns-wr",children:(0,o.jsx)(a.Z,{idparams:{threadId:e.post.ThreadId,postId:e.post.id}})})})]}),(0,o.jsx)(s.Z,{post:e.post})]})}},2869:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(5861),s=n(5671),a=n(3144),o=n(7757),c=n.n(o),i=n(4569),u=n.n(i);u().interceptors.request.use((function(e){return"post"===e.method&&console.log(e),e}),(function(e){return Promise.reject(e)}));var l=function(){var e=(0,r.Z)(c().mark((function e(t,n,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()[t]("".concat("http://localhost:7000/api","/").concat(n),r);case 3:return s=e.sent,e.abrupt("return",s);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),p=l,d="http://localhost:7000/api",f=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"getAllThreadsOnBoard",value:function(){var e=(0,r.Z)(c().mark((function e(t){var n,r,s,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,r=a.length>2&&void 0!==a[2]?a[2]:10,e.prev=2,console.log(n),e.next=6,p("get","threads",{params:{boardName:t.replace("/",""),offset:n*r,limit:r}});case 6:return s=e.sent,e.abrupt("return",s.data);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getThread",value:function(){var e=(0,r.Z)(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("get","threads/".concat(t,"?boardName=").concat(n));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"refreshThread",value:function(){var e=(0,r.Z)(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("get","app/".concat(t,"?lastpost=").concat(n));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPost",value:function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("get","posts/".concat(t));case 3:return n=e.sent,console.log(n),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createPost",value:function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.mediaFiles.length>0)){e.next=11;break}return(r=new FormData).append("message",JSON.stringify(t.message)),t.mediaFiles.forEach((function(e){r.append("mediaFiles",e,e.name)})),e.next=7,u()({method:"post",url:"".concat(d,"/posts"),data:r,headers:{"Content-Type":"multipart/form-data;"}});case 7:return n=e.sent,e.abrupt("return",n);case 11:return e.next=13,p("post","posts",t);case 13:n=e.sent;case 14:return e.abrupt("return",n);case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createThread",value:function(){var e=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.mediaFiles.length>0)){e.next=10;break}return(r=new FormData).append("message",JSON.stringify(t.message)),t.mediaFiles.forEach((function(e){r.append("mediaFiles",e,e.name)})),e.next=7,u()({method:"post",url:"".concat(d,"/threads"),data:r,headers:{"Content-Type":"multipart/form-data;"}});case 7:n=e.sent,e.next=13;break;case 10:return e.next=12,p("post","threads",t);case 12:n=e.sent;case 13:return e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"trackerPanelCount",value:function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("get","favorite/?threads=".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"trackerPanelUpdateCount",value:function(){var e=(0,r.Z)(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("get","tracker/".concat(t,"?lastpost=").concat(n));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),m=f},3682:function(e,t,n){"use strict";n.d(t,{A3:function(){return f},Pm:function(){return m},Rq:function(){return d},dX:function(){return h}});var r=n(5861),s=n(7757),a=n.n(s),o=n(6450),c=n(2869);function i(e,t){for(var n=0;e!==document.getElementById("board");)n+=e[t],e=e.offsetParent;return n}function u(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(a().mark((function e(t){var n,r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new c.Z,e.next=3,n.getThread(t[1],t[0]);case 3:return r=e.sent,s={},r.forEach((function(e){s[e.id]=e})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t=document.body.clientWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,r=i(e.target,"offsetLeft")+e.target.offsetWidth/2,s=i(e.target,"offsetTop");e.clientY<.75*n&&(s+=e.target.offsetHeight);var a={};return r<t/2?a.left=r+"px":a.right=parseInt(t-r+2)+"px",e.clientY<.75*n?a.top=s+"px":a.bottom=parseInt(document.body.scrollHeight-s-4)+"px",a}function d(e){return function(){var t=(0,r.Z)(a().mark((function t(n,s){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s().replyPostsState.timerId&&n((0,o.pQ)("timerId")),s().replyPostsState.cursorTimerId||n((0,o.Dk)(["cursorTimerId",setTimeout((0,r.Z)(a().mark((function t(){var r,c,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n((0,o.pQ)("cursorTimerId")),r=e.target.getAttribute("data-path").split(/(?:#|\/)/g),s().replyPostsState.threads[r[1]]){t.next=7;break}return t.next=5,u(r);case 5:c=t.sent,n((0,o.hP)(c));case 7:console.log(s().replyPostsState.threads[r[1]]),i=p(e),n((0,o.bF)({postId:r[2],threadId:r[1],pos:i}));case 10:case"end":return t.stop()}}),t)}))),50)]));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function f(e){return function(e,t){t().replyPostsState.timerId&&e((0,o.pQ)("timerId"))}}function m(e){return function(e,t){t().replyPostsState.timerId||e((0,o.Dk)(["timerId",setTimeout((function(){e((0,o.U9)()),e((0,o.pQ)("timerId"))}),1e3)]))}}function h(){return function(e,t){t().replyPostsState.cursorTimerId&&e((0,o.pQ)("cursorTimerId")),t().replyPostsState.timerId||e((0,o.Dk)(["timerId",setTimeout((function(){e((0,o.U9)()),e((0,o.pQ)("timerId"))}),1e3)]))}}},4802:function(e,t,n){var r,s,a;s=[],r=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,c=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(e,t,n){var c=o.URL||o.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?a(i):s(i.href)?r(e,t,n):a(i,i.target="_blank")):(i.href=c.createObjectURL(e),setTimeout((function(){c.revokeObjectURL(i.href)}),4e4),setTimeout((function(){a(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,o),n);else if(s(e))r(e,n,o);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout((function(){a(c)}))}}:function(e,t,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var a="application/octet-stream"===e.type,i=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&i||c)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},l.readAsDataURL(e)}else{var p=o.URL||o.webkitURL,d=p.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout((function(){p.revokeObjectURL(d)}),4e4)}});o.saveAs=i.saveAs=i,e.exports=i},void 0===(a="function"===typeof r?r.apply(t,s):r)||(e.exports=a)}}]);
//# sourceMappingURL=115.3812d46d.chunk.js.map